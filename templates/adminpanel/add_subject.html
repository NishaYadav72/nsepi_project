{% extends 'adminpanel/base.html' %}

{% block content %}
<h2>Add Subject</h2>
<hr>

<form method="post" class="row g-3">
    {% csrf_token %}

    <div class="col-md-4">
        <label>Course</label>
        <select name="course" class="form-control" required>
            <option value="">-- Select Course --</option>
            {% for course in courses %}
                <option value="{{ course.id }}">{{ course.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="col-md-4">
        <label>Subject Name</label>
        <input type="text" name="subject_name" class="form-control" required>
    </div>

    <div class="col-md-4 d-flex align-items-end">
        <button class="btn btn-success w-100">Add Subject</button>
    </div>
</form>

<div class="mt-4">
    <a href="{% url 'add_course' %}" class="btn btn-primary btn-sm">
        âž• Add New Course
    </a>
</div>

<hr>

<h4>Subjects List</h4>

<table class="table table-bordered mt-3">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Course</th>
            <th>Subject</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for subject in subjects %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ subject.course.name }}</td>
            <td>{{ subject.name }}</td>
            <td>
<a href="{% url 'edit_subject' subject.id %}" class="btn btn-warning btn-sm">
    Edit
</a>
                <a href="{% url 'delete_subject' subject.id %}"
                   class="btn btn-danger btn-sm"
                   onclick="return confirm('Delete subject?')">
                    Delete
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="text-center">No subjects added yet</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
