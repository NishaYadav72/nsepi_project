{% extends 'adminpanel/base.html' %}

{% block content %}
<style>
.course-card{
    border-radius:16px;
}
.course-table th{
    background:#0d6efd;
    color:white;
}
.course-table td, .course-table th{
    vertical-align: middle;
}
.action-btns a{
    margin-right:5px;
}
</style>

{% if messages %}
<div class="mt-3">
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endfor %}
</div>
{% endif %}

<div class="container-fluid">

    <!-- Page Heading -->
    <div class="d-flex align-items-center mb-4">
        <i class="bi bi-book-half fs-3 text-primary me-2"></i>
        <h3 class="fw-bold mb-0">Manage Courses</h3>
    </div>

    <!-- Add Course Card -->
    <div class="card shadow-sm course-card mb-4">
        <div class="card-header bg-primary text-white fw-semibold">
            â• Add New Course
        </div>
        <div class="card-body">
            <form method="post" class="row g-3">
                {% csrf_token %}

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Course Name</label>
                    <input type="text" name="course_name" class="form-control" required>
                </div>

                <div class="col-md-3">
                    <label class="form-label fw-semibold">Course Code</label>
                    <input type="text" name="course_code" class="form-control" required>
                </div>

                <div class="col-md-3">
                    <label class="form-label fw-semibold">Duration</label>
                    <input type="text" name="course_duration" class="form-control" placeholder="e.g. 6 Months">
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-semibold">Course Fee (â‚¹)</label>
                    <input type="number" name="course_fee" class="form-control">
                </div>

                <div class="col-md-8 d-flex align-items-end">
                    <button class="btn btn-success btn-lg w-100">
                        Add Course
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Course List -->
    <div class="card shadow-sm course-card">
        <div class="card-header bg-dark text-white fw-semibold">
            ğŸ“š Course List
        </div>

        <div class="card-body p-0">
            <table class="table table-bordered table-hover course-table mb-0">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Course Name</th>
                        <th>Course Code</th>
                        <th>Duration</th>
                        <th>Fee</th>
                        <th width="22%">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for course in courses %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td class="fw-semibold">{{ course.name }}</td>
                        <td>{{ course.code }}</td>
                        <td>{{ course.duration }}</td>
                        <td>â‚¹ {{ course.fee }}</td>
                        <td class="action-btns">
                            <a href="{% url 'edit_course' course.id %}" class="btn btn-warning btn-sm">âœï¸ Edit</a>
                            <a href="{% url 'delete_course' course.id %}" class="btn btn-danger btn-sm"
                               onclick="return confirm('Delete this course?')">ğŸ—‘ Delete</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-center text-muted py-4">
                            No courses added yet
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>
{% endblock %}
